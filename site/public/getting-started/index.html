<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title>Getting started - devAny</title>
    <meta name="generator" content="Hugo 0.34" />

    
    <link rel="canonical" href="https://www.devany.net/getting-started/">
    
    <meta name="author" content="shohey1226">
    

    <meta property="og:url" content="https://www.devany.net/getting-started/">
    <meta property="og:title" content="devAny">
    <meta property="og:image" content="https://www.devany.net/images/logo.png">
    <meta name="apple-mobile-web-app-title" content="devAny">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="https://www.devany.net/images/favicon.ico">
    <link rel="icon" type="image/x-icon" href="https://www.devany.net/images/favicon.ico">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('https://www.devany.net/fonts/icon.eot');
        src: url('https://www.devany.net/fonts/icon.eot')
               format('embedded-opentype'),
             url('https://www.devany.net/fonts/icon.woff')
               format('woff'),
             url('https://www.devany.net/fonts/icon.ttf')
               format('truetype'),
             url('https://www.devany.net/fonts/icon.svg')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="https://www.devany.net/stylesheets/application.css">
    <link rel="stylesheet" href="https://www.devany.net/stylesheets/temporary.css">
    <link rel="stylesheet" href="https://www.devany.net/stylesheets/palettes.css">
    <link rel="stylesheet" href="https://www.devany.net/stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source%20Sans%20Pro:400,700|Roboto&#43;Mono">
    <style>
      body, input {
        font-family: 'Source Sans Pro', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Roboto Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <link rel="stylesheet" href="https://www.devany.net/stylesheets/custom.css">
    
    <script src="https://www.devany.net/javascripts/modernizr.js"></script>

    

  </head>
  <body class="palette-primary-white palette-accent-cyan">



	
	


<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        <b>devAny</b> 
      </div>
    </div>

    <div class="button" style="padding:4px">
      <a href="https://itunes.apple.com/app/id1315254200" style="border-bottom: none;display:inline-block;overflow:hidden;background:url(https://linkmaker.itunes.apple.com/assets/shared/badges/en-us/appstore-lrg.svg) no-repeat;width:135px;height:40px;background-size:contain;" onClick="gtag('event', 'appstore', { event_category: 'header' });"></a>
    </div>

    
    
        

  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>

</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">

  


  <div class="scrollable">
    <div class="wrapper">
      


      <div class="toc">
        
        <ul>
          




<li>
  
    



<a  title="Home" href="https://www.devany.net/">
	
	Home
</a>



  
</li>



<li>
  
    



<a class="current" title="Getting started" href="https://www.devany.net/getting-started/">
	
	Getting started
</a>


<ul id="scrollspy">
</ul>


  
</li>



<li>
  
    



<a  title="How to use devAny" href="https://www.devany.net/how-to-use/">
	
	How to use devAny
</a>



  
</li>



<li>
  
    



<a  title="How to use terminal" href="https://www.devany.net/how-to-use-terminal/">
	
	How to use terminal
</a>



  
</li>



<li>
  
    



<a  title="How to use editor" href="https://www.devany.net/how-to-use-editor/">
	
	How to use editor
</a>



  
</li>



<li>
  
    



<a  title="How to use browser" href="https://www.devany.net/how-to-use-browser/">
	
	How to use browser
</a>



  
</li>



<li>
  
    



<a  title="FAQ" href="https://www.devany.net/faq/">
	
	FAQ
</a>



  
</li>



<li>
  
    



<a  title="Privacy" href="https://www.devany.net/privacy/">
	
	Privacy
</a>



  
</li>



<li>
  
    



<a  title="Terms &amp; Conditions" href="https://www.devany.net/terms/">
	
	Terms &amp; Conditions
</a>



  
</li>



<li>
  
    



<a  title="License" href="https://www.devany.net/license/">
	
	License
</a>



  
</li>


        </ul>
        

        
        <hr>
        <span class="section">The author</span>
        
        <ul>
          
          <li>
            <a href="https://twitter.com/shohey1226" target="_blank" title="@shohey1226 on Twitter">
              @shohey1226 on Twitter
            </a>
          </li>
          

          

          
        </ul>
        
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1>devAny - Getting started </h1>

			

<h2 id="installation-on-server">Installation on Server</h2>

<p><img src="https://www.devany.net/images/devAny_diagram.jpg" alt="devAny Diagram" /></p>

<p><em><span style="color: red">The connection of this setup is <b>NOT</b> encrypted. Secure connection is highly recommended. Please follow <a href="https://www.devany.net/getting-started/#secure-connection">secure connection</a> after the below instruction is completed.</span></em></p>

<p>There are a couple of processes need to run on server to use devAny. In order to avoid this tedious setup, I provide images that includes all required processes and the way to create the image on your end using <a href="https://www.packer.io">Packer </a>.</p>

<h3 id="1-using-docker">1. Using Docker</h3>

<p>Docker is well-known container and the easiest way to launch devAny process on server. One drawbacks is that only mounted volume is persistent after relaunch docker container. For example, if you install packages with apt-get to /user/local/bin, those are gone after restarting the container process. Therefore, installing all packages in your mounted volume with linuxbrew, rbenv, nvm or others are recommended. I put dockerfile in <a href="https://github.com/shohey1226/devany-docker">devany-docker</a>. Please feel free to fork and add your packages and build it by yourself.</p>

<p>Okay, moving on the how to. First of all, please install docker by following <a href="https://docs.docker.com/engine/installation/">docker installation</a></p>

<p>After docker is installed, you just run the following command.</p>

<pre><code>$ sudo docker run -d -h devany \
-v /home/devany:/home/&lt;USERNAME&gt;
-e HOME=/home/&lt;USERNAME&gt; -e USERNAME=&lt;USERNAME&gt; -e PASSWORD=&lt;YOUR PASSWORD&gt; \
-p 8888:8888 -p 3000:5000 shohey1226/devany:latest
</code></pre>

<p>Please set your <code>&lt;USERNAME&gt;</code> and <code>&lt;YOUR PASSWORD&gt;</code>.  For example,</p>

<pre><code>$ sudo docker run -d -h devany \
-v /home/devany:/home/shohey1226 \
-e HOME=/home/shohey1226 -e USERNAME=shohey1226 -e PASSWORD=devanyisawesome \
-p 8888:8888 -p 3000:5000 shohey1226/devany:latest  
</code></pre>

<p><em>*1. If you are not familiar with docker. Please go through <a href="https://docs.docker.com/">their documentation</a>.</em></p>

<h3 id="2-using-iaas">2. Using IaaS</h3>

<p>Here I only explain AWS and Google Could but <a href="https://www.packer.io">Packer</a> has more capability to build images.
Feel free to fork <a href="https://github.com/shohey1226/devany-packer">devany-packer</a> and create image. (PR is welcome by the way)</p>

<h4 id="2-1-prepare-the-image">2-1 Prepare the image</h4>

<p><strong>Amazon EC2 image(AMI)</strong></p>

<p>There are public images so you can use. You can find these AMI ID in the region, and copy it if needed.</p>

<ul>
<li>ami-b2dc9ed4 (region: ap-northeast-1)</li>
<li>ami-32f7fd52 (region: us-west-1)</li>
</ul>

<p><strong>Google Cloud image</strong></p>

<p>I found it is difficult to share google images to others. I explain how to make the image on your end.
Before running below command,</p>

<ol>
<li>Go to <a href="https://www.packer.io/downloads.html">Download Packer</a> and install Packer.</li>
<li>Prepare account file with <a href="https://www.packer.io/docs/builders/googlecompute.html#running-without-a-compute-engine-service-account">Running Without a Compute Engine Service Account</a></li>
<li>Find out which zone you want to buid on with <a href="https://cloud.google.com/compute/docs/regions-zones/regions-zones">Region and Zone</a></li>
</ol>

<pre><code class="language-text">$ git clone https://github.com/shohey1226/devany-packer.git
$ cd devany-packer
$ REGION=asia-northeast1-a GOOGLE_ACCOUNT_FILE=&lt;account file&gt; packer build -only=google devany.json  
</code></pre>

<h4 id="2-2-set-up-user">2-2 Set up user</h4>

<p>Bring up the instance with image and login to the instance. Make sure the port 8888 is opened on the firewall.</p>

<pre><code class="language-text">$ sudo su
ROOT# USERNAME=&lt;USERNAME&gt; PASSWORD=&lt;PASSWORD&gt; /run.sh
</code></pre>

<p>Make sure that the processes are runnging.</p>

<pre><code class="language-bash">$ sudo supervisorctrl status
apache                           RUNNING   pid 23, uptime 22 days, 12:38:14
ttyd                             RUNNING   pid 24, uptime 22 days, 12:38:14
</code></pre>

<h2 id="setup-on-mobile">Setup on mobile</h2>

<p>Download app from <a href="http://itunes.apple.com/app/id1315254200">iTunes App Store</a> and open the setup(portrait view). Add server IP/hostname, port, username and password that you specify in server setup.</p>

<p><img src="https://www.devany.net/images/devAny_mobile_setup.jpg" alt="Setup" /></p>

<p>Then turn your mobile to landscape, you should have development environment!</p>

<p><img src="https://www.devany.net/images/devAny_first_view.jpg" alt="First View" /></p>

<h2 id="secure-connection">Secure connection</h2>

<p>The connection between mobile app and server should be encrypted. Otherwise raw data is transmitted between them and there is possibility to be sneaked.
(Please follow the below after you completed &ldquo;Getting started&rdquo; and confirmed that the app is working)</p>

<p><img src="https://www.devany.net/images/devAny_diagram_secured.jpg" alt="devAny Diagram secured connection" /></p>

<p>There are many ways to accomplish this but I introduce a cost-saving way, which is <a href="https://letsencrypt.org/">Let&rsquo;s encrypt</a>.
In order to do that, you need to have your own <a href="https://en.wikipedia.org/wiki/Domain_name">domain</a>.</p>

<p>As example, we use the below info to setup this.</p>

<ul>
<li>IP address of server - 123.123.123.123</li>
<li>Hostname - secure.devany.net</li>
</ul>

<h3 id="1-set-up-a-record-on-dns">1. Set up &ldquo;A record&rdquo; on DNS.</h3>

<p>Domain Buy Service usually provide the console to configure DNS records. Go to yours and add the following.</p>

<pre><code class="language-txt">secure  A    123.123.123.123
</code></pre>

<p>Confirm that you can resolve the hostname</p>

<pre><code class="language-bash">$ host secure.devany.net
secure.devany.net has address 123.123.123.123
</code></pre>

<h3 id="2-install-applications-for-let-s-encrypt">2. Install applications for let&rsquo;s encrypt</h3>

<p><em>*OS/distro is Linux/ubuntu</em></p>

<pre><code class="language-bash">$ sudo add-apt-repository ppa:certbot/certbot
$ sudo apt-get update
$ sudo apt-get install python-certbot-nginx
</code></pre>

<h3 id="3-configure-nginx">3. Configure nginx</h3>

<p>Change <code>server_name</code> to your hostname.</p>

<pre><code class="language-bash">$ sudo vi /etc/nginx/sites-available/default

server_name secure.devany.net # change this line
</code></pre>

<p>Test your configuration.</p>

<pre><code class="language-shell">ubuntu@:~$ sudo nginx -t
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
</code></pre>

<p>And reload the configuraion.</p>

<pre><code>ubuntu@:~$ sudo systemctl reload nginx
</code></pre>

<h3 id="4-set-up-certbot">4. Set up certbot</h3>

<pre><code class="language-bash">ubuntu@:~$ sudo certbot --nginx -d secure.devany.net
Saving debug log to /var/log/letsencrypt/letsencrypt.log
Plugins selected: Authenticator nginx, Installer nginx
Obtaining a new certificate
Performing the following challenges:
tls-sni-01 challenge for secure.devany.net
Waiting for verification...
Cleaning up challenges
Deployed Certificate to VirtualHost /etc/nginx/sites-enabled/default for set(['secure.devany.net'])

Please choose whether or not to redirect HTTP traffic to HTTPS, removing HTTP access.
-------------------------------------------------------------------------------
1: No redirect - Make no further changes to the webserver configuration.
2: Redirect - Make all requests redirect to secure HTTPS access. Choose this for
new sites, or if you're confident your site works on HTTPS. You can undo this
change by editing your web server's configuration.
-------------------------------------------------------------------------------
Select the appropriate number [1-2] then [enter] (press 'c' to cancel): 1

-------------------------------------------------------------------------------
Congratulations! You have successfully enabled https://secure.devany.net

You should test your configuration at:
https://www.ssllabs.com/ssltest/analyze.html?d=secure.devany.net
-------------------------------------------------------------------------------

IMPORTANT NOTES:
 - Congratulations! Your certificate and chain have been saved at:
   /etc/letsencrypt/live/secure.devany.net/fullchain.pem
   Your key file has been saved at:
   /etc/letsencrypt/live/secure.devany.net/privkey.pem
   Your cert will expire on 2018-03-17. To obtain a new or tweaked
   version of this certificate in the future, simply run certbot again
   with the &quot;certonly&quot; option. To non-interactively renew *all* of
   your certificates, run &quot;certbot renew&quot;
 - If you like Certbot, please consider supporting our work by:

   Donating to ISRG / Let's Encrypt:   https://letsencrypt.org/donate
   Donating to EFF:                    https://eff.org/donate-le
</code></pre>

<h3 id="5-test-renewing-the-certificate-and-set-the-crontab">5. Test renewing the certificate and set the crontab</h3>

<pre><code class="language-bash">ubuntu@:~$ sudo certbot renew --dry-run
Saving debug log to /var/log/letsencrypt/letsencrypt.log

-------------------------------------------------------------------------------
Processing /etc/letsencrypt/renewal/secure.devany.net.conf
-------------------------------------------------------------------------------
Cert not due for renewal, but simulating renewal for dry run
Plugins selected: Authenticator nginx, Installer nginx
Renewing an existing certificate
Performing the following challenges:
tls-sni-01 challenge for secure.devany.net
Waiting for verification...
Cleaning up challenges

-------------------------------------------------------------------------------
new certificate deployed with reload of nginx server; fullchain is
/etc/letsencrypt/live/secure.devany.net/fullchain.pem
-------------------------------------------------------------------------------

-------------------------------------------------------------------------------
** DRY RUN: simulating 'certbot renew' close to cert expiry
**          (The test certificates below have not been saved.)

Congratulations, all renewals succeeded. The following certs have been renewed:
  /etc/letsencrypt/live/secure.devany.net/fullchain.pem (success)
** DRY RUN: simulating 'certbot renew' close to cert expiry
**          (The test certificates above have not been saved.)
-------------------------------------------------------------------------------

IMPORTANT NOTES:
 - Your account credentials have been saved in your Certbot
   configuration directory at /etc/letsencrypt. You should make a
   secure backup of this folder now. This configuration directory will
   also contain certificates and private keys obtained by Certbot so
   making regular backups of this folder is ideal.
</code></pre>

<p>Once it&rsquo;s confirmed that renewal is working, set the job in cron so periodically checks the certification.</p>

<pre><code class="language-bash">$ sudo su 
$ crontab -e
# add the below
32 0 * * * certbot renew --post-hook &quot;systemctl reload nginx&quot; &gt;&gt; /tmp/certbot.log
</code></pre>

<h3 id="6-set-up-reverse-proxy-on-nginx-to-connect-to-docker-container">6. Set up reverse proxy on nginx to connect to docker container</h3>

<p>Open <code>/etc/nginx/sites-available/default</code> and change it to the below.</p>

<pre><code class="language-bash">$ sudo vi /etc/nginx/sites-available/default
...
        server_name secure.devany.net;

        location / {
          proxy_pass http://localhost:8888/;
          proxy_redirect off;
          proxy_set_header Host $host;
          proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
          proxy_set_header X-Forwarded-Ssl on;

          proxy_http_version 1.1;
          proxy_set_header Upgrade $http_upgrade;
          proxy_set_header Connection &quot;upgrade&quot;;
        }

        location ~ /.well-known {
          allow all;
        }
...        
</code></pre>

<p>then, restart nginx.</p>

<pre><code class="language-bash">$ sudo systemctl restart nginx
</code></pre>

<p>All done!  Now you can feel safe when you use devAny:)</p>

<h3 id="references">References</h3>

<ul>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-secure-nginx-with-let-s-encrypt-on-ubuntu-16-04">https://www.digitalocean.com/community/tutorials/how-to-secure-nginx-with-let-s-encrypt-on-ubuntu-16-04</a></li>
<li><a href="https://gist.github.com/robbiet480/b1e9a2a22501b8304547">https://gist.github.com/robbiet480/b1e9a2a22501b8304547</a></li>
<li><a href="https://serverfault.com/questions/790772/cron-job-for-lets-encrypt-renewal">https://serverfault.com/questions/790772/cron-job-for-lets-encrypt-renewal</a></li>
</ul>

<p>OK, then we move onto <a href="https://www.devany.net/how-to-use/">how to use</a>.</p>


			<aside class="copyright" role="note">
				
				&copy; 2018 @shohey1226
				
			</aside>

			<footer class="footer">
				

<nav class="pagination" aria-label="Footer">
  <div class="previous">
  
  </div>

  <div class="next">
  
      <a href="https://www.devany.net/how-to-use-terminal/" title="How to use terminal">
        <span class="direction">
          Next
        </span>
        <div class="page">
          <div class="stretch">
            <div class="title">
              How to use terminal
            </div>
          </div>
          <div class="button button-next" role="button" aria-label="Next">
            <i class="icon icon-forward"></i>
          </div>
        </div>
      </a>
  
  </div>
</nav>





			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

    <script>
    
      var base_url = 'https:\/\/www.devany.net\/';
      var repo_id  = 'shohey1226\/devAnyDoc';
    
    </script>

    <script src="https://www.devany.net/javascripts/application.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(scrollspy) {
        if(headers.length > 0) {
          for(var i = 0; i < headers.length; i++) {
            var li = document.createElement("li");
            li.setAttribute("class", "anchor");

            var a  = document.createElement("a");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", headers[i].innerHTML);
            a.innerHTML = headers[i].innerHTML;

            li.appendChild(a)
            scrollspy.appendChild(li);
          }
        } else {
          scrollspy.parentElement.removeChild(scrollspy)
        }


        /* Add permanent link next to the headers */
        var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

        for(var i = 0; i < headers.length; i++) {
            var a = document.createElement("a");
            a.setAttribute("class", "headerlink");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", "Permanent link")
            a.innerHTML = "#";
            headers[i].appendChild(a);
        }
      }
    </script>

    

     
     <script async src="https://www.googletagmanager.com/gtag/js?id=UA-118306653-1"></script>
     <script>
       window.dataLayer = window.dataLayer || [];
       function gtag(){dataLayer.push(arguments);}
       gtag('js', new Date());
       gtag('config', 'UA-118306653-1');
     </script>

    

    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>

